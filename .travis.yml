language: php

php:
  - 5.3
  - 5.4

env:
  - DB=application

before_script:
  - "sudo apt-get -qq update"
  - "sudo apt-get -y -qq install apache2"
  - "sudo apt-get -y -qq install libapache2-mod-php5"
  - sudo /etc/init.d/apache2 restart
  - "sleep 5"
  - "sudo mkdir /var/www/codeigniter"
  - "sudo chmod 777 /var/www/codeigniter -R"
  - "sudo cp index.php /var/www/codeigniter/index.php"
  - "sudo cp application/ /var/www/codeigniter/ -r"
  - "sudo cp system/ /var/www/codeigniter/ -r"
  - ls /var/www
  - ls /var/www/codeigniter
  - "curl -v http://127.0.0.1/codeigniter/index.php"

script: phpunit --configuration tests/travis/$DB.phpunit.xml

branches:
  only:
    - develop
    - master
    - application-tests