language: php

php:
  - 5.3
  - 5.4

env:
  - DB=application

before_script:
  - "sudo apt-get install lighttpd"
  - "sudo cp index.php /var/www/codeigniter/index.php"
  - "sudo cp application/ /var/www/codeigniter/ -r"
  - "sudo cp system/ /var/www/codeigniter/ -r"
  - "curl -v http://127.0.0.1/codeigniter"

script: phpunit --configuration tests/travis/$DB.phpunit.xml

branches:
  only:
    - develop
    - master
    - application-tests